@import "tailwindcss";
@plugin "@tailwindcss/typography";
@custom-variant dark (&:is(.dark *));

/* -------------------------------------------------- */
/*  THEME OVERRIDES: TOKENS                           */
/* -------------------------------------------------- */
@theme {
  --font-sans: "Inter", system-ui, sans-serif;
  --font-serif: "Source Serif 4", Georgia, serif;

  /* Brand colours - PRIMARY = teal, ACCENT = gold */
  --color-brand: #007a78;               /* teal */
  --color-brand-hover: #005c5a;         /* deeper teal */

  --color-gold: #f2c75c;                /* light gold (links / decor) */
  --color-gold-deep: #c99220;           /* deeper gold (hover / decor) */

  /* Site backgrounds */
  --color-bg-light: #f7f4ef;            /* light mode background */
  --color-bg-dark: #004241;             /* rich dark teal */

  /* Text */
  --color-text-light: #1a1816;          /* warm charcoal */
  --color-text-dark: #f7f4ef;           /* light text on dark */

  /* Links - LIGHT MODE (teal) */
  --color-link-light: #007a78;
  --color-link-hover-light: #005c5a;

  /* Links - DARK MODE (gold) */
  --color-link-dark: #e7c26a;
  --color-link-hover-dark: #c99220;

  /* Supporting neutrals */
  --color-soft-warm-gray: #e8e3dc;
  --color-deep-warm-gray: #2a2724;
}

/* -------------------------------------------------- */
/*  BASE TYPOGRAPHY + GLOBALS                         */
/* -------------------------------------------------- */
@layer base {
  html {
    font-family: var(--font-sans);
  }

  /* Global Heading Defaults (outside .prose) */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-serif);
    font-weight: 100;
    font-optical-sizing: auto;
    line-height: 1.2;
  }

  h1 {
    font-size: clamp(2.25rem, 3vw, 3rem);
  }

  h2 {
    font-size: clamp(1.75rem, 2.5vw, 2.25rem);
  }

  h3 {
    font-size: 1.5rem;
  }

  /* -------------------------------------------------- */
  /*  TYPOGRAPHY PLUGIN OVERRIDES                      */
  /*  (Markdown content inside .prose)                  */
  /* -------------------------------------------------- */

  /* Headings in markdown: lighter editorial weight */
  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    font-family: var(--font-serif);
    font-weight: 300 !important; /* key change: softer, not 700 */
    font-optical-sizing: auto;
    line-height: 1.1;
  }

  /* Links inside markdown body */
  .prose a {
    color: var(--color-link-light);
    text-decoration: underline;
    text-underline-offset: 0.18em;
  }

  .prose a:hover,
  .prose a:focus {
    color: var(--color-link-hover-light);
  }

  .dark .prose a {
    color: var(--color-link-dark);
  }

  .dark .prose a:hover,
  .dark .prose a:focus {
    color: var(--color-link-hover-dark);
  }

  /* Markdown bold / strong â€“ softer emphasis */
  .prose strong,
  .prose b {
    font-weight: 400 !important; /* key change: gentle bold */
    color: inherit;
  }

  .dark .prose strong,
  .dark .prose b {
    font-weight: 400 !important;
    color: inherit;
  }

  /* Section vertical rhythm helper */
  .section-space {
    padding-top: 4rem;
    padding-bottom: 4rem;
  }

  @media (min-width: 768px) {
    .section-space {
      padding-top: 5.5rem;
      padding-bottom: 5.5rem;
    }
  }

  /* Fix Tailwind border defaults */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }

  /* -------------------------------------------------- */
  /*  TEXT SELECTION COLORS                             */
  /* -------------------------------------------------- */

  /* Light mode selection */
  ::selection {
    background-color: rgba(0, 122, 120, 0.25);   /* soft teal wash */
    color: var(--color-text-light);              /* charcoal */
  }

  a::selection,
  a:visited::selection,
  a:hover::selection,
  a:focus::selection {
    background-color: rgba(0, 122, 120, 0.35);
    color: var(--color-text-light) !important;
  }

  /* Dark mode selection */
  .dark ::selection {
    background-color: rgba(242, 199, 92, 0.35);  /* soft gold wash */
    color: var(--color-text-dark);               /* light text */
  }

  .dark a::selection,
  .dark a:visited::selection,
  .dark a:hover::selection,
  .dark a:focus::selection {
    background-color: rgba(242, 199, 92, 0.5);
    color: var(--color-text-dark) !important;
  }

  /* -------------------------------------------------- */
  /*  GLOBAL LINKS                                      */
  /* -------------------------------------------------- */

  a {
    color: var(--color-link-light);
    text-decoration: none;
    text-underline-offset: 0.18em;
    text-decoration-thickness: 1px;
    transition:
      color 0.15s ease,
      text-decoration-color 0.15s ease;
  }

  a:hover,
  a:focus-visible {
    color: var(--color-link-hover-light);
    text-decoration: underline;
    text-decoration-color: var(--color-link-hover-light);
  }

  .dark a {
    color: var(--color-link-dark);
    text-decoration-color: var(--color-link-dark);
  }

  .dark a:hover,
  .dark a:focus-visible {
    color: var(--color-link-hover-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-link-hover-dark);
  }
}

/* -------------------------------------------------- */
/*  COMPONENTS: BLOG TITLES, SIGNATURE, ETC           */
/* -------------------------------------------------- */
@layer components {
  .post-title {
    font-family: var(--font-serif);
    font-weight: 300;
    font-optical-sizing: auto;
    line-height: 1.2;
  }

  /* Explicit link styling for post titles */
  .post-title a {
    color: var(--color-text-light);              /* charcoal in light mode */
    text-decoration: underline;
    text-underline-offset: 0.18em;
  }

  .post-title a:hover,
  .post-title a:focus-visible {
    color: var(--color-link-hover-light);        /* deeper teal on hover */
  }

  .dark .post-title a {
    color: var(--color-text-dark);               /* light headings in dark mode */
  }

  .dark .post-title a:hover,
  .dark .post-title a:focus-visible {
    color: var(--color-link-hover-dark);         /* deeper gold on hover */
  }

  /* Signature styling */
  .signature {
    font-family: "Nothing You Could Do", cursive;
    font-size: 3.5rem;
    font-weight: 300;
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    width: 0;
    border-right: 0.12em solid transparent;
    animation: handwriting 3s cubic-bezier(0.48, 0.01, 0.22, 1) forwards;
    animation-delay: 0.2s;
  }

  .prose h1.signature {
    font-family: "Nothing You Could Do", cursive !important;
    margin-bottom: 0.25rem;
    margin-top: 0;
  }

  .prose p.hero-subtitle {
    margin-top: 0.25rem;
  }

  .nothing-you-could-do {
    font-family: "Nothing You Could Do", cursive;
    font-weight: 400;
  }
}

/* -------------------------------------------------- */
/*  UTILITY OVERRIDES (Container, Touch Targets)      */
/* -------------------------------------------------- */
@utility container {
  padding-inline: 1rem;

  @media (width >= theme(--breakpoint-sm)) {
    padding-inline: 2rem;
  }
  @media (width >= theme(--breakpoint-lg)) {
    padding-inline: 4rem;
  }
  @media (width >= theme(--breakpoint-xl)) {
    padding-inline: 5rem;
  }
  @media (width >= theme(--breakpoint-2xl)) {
    padding-inline: 6rem;
  }
}

/* Touch targets */
nav a,
nav button,
.navbar a,
.navbar button,
.nav-link,
button,
[role="button"],
.btn,
a.px-4,
a.flex.items-center {
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding-inline: 0.75rem;
  padding-block: 0.5rem;
}

nav a + a,
nav button + button,
.navbar a + a,
.nav-link + .nav-link {
  margin-left: 0.5rem;
}

/* -------------------------------------------------- */
/*  BACKGROUND + TEXT (light/dark swap)               */
/* -------------------------------------------------- */
:root {
  --site-bg: var(--color-bg-light);
}

.dark {
  --site-bg: var(--color-bg-dark);
}

body {
  background-color: var(--site-bg) !important;
  color: var(--color-text-light);
}

.dark body {
  color: var(--color-text-dark);
}

/* -------------------------------------------------- */
/*  ANIMATIONS                                        */
/* -------------------------------------------------- */
@keyframes gentle-bounce {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-3px);
  }
  100% {
    transform: translateY(0);
  }
}

a.gentle-clicked {
  animation: gentle-bounce 0.3s ease-out;
}

@keyframes handwriting {
  0% {
    width: 0;
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  100% {
    width: 100%;
    opacity: 1;
  }
}

.animation-fade {
  opacity: 0;
  animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
.animation-slide-up {
  opacity: 0;
  transform: translateY(20px);
  animation: slideUp 0.5s ease forwards;
}